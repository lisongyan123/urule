!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=617)}({4:function(e,t,n){"use strict";function r(){return window.__u_id_++,"_u_r_id__"+window.__u_id_}function a(e){if(e&&401===e.status)bootbox.alert("权限不足，不能进行此操作.");else if(e&&e.responseText){var t=e.responseText,n=JSON.parse(t);bootbox.dialog({title:"服务端错误",message:"<span style='color: red'>"+n.errorMsg+"</span>",buttons:[{label:"查看错误堆栈",callback:function(){var e=window.open("error-stack.html","_blank");$(e).load(function(){var e=$(this.document.body);e.css({"font-size":"13px"}),e.empty(),e.append(n.stack)})}}]})}else bootbox.alert("<span style='color: red'>服务端出错</span>")}Object.defineProperty(t,"__esModule",{value:!0}),t.generateId=r,t.pathId=function(e){if(_fullpath_map.has(e))return _fullpath_map.get(e);var t=r();return _fullpath_map.set(e,t),t},t.copyCellData=function(e,t){$.ajax({url:window._server+"/common/parseCellData",type:"POST",data:{type:e,xml:t}})},t.pasteCellData=function(e,t){$.ajax({url:window._server+"/common/loadCellData",type:"POST",data:{type:e},success:function(e){e?t(e):bootbox.alert("当前没有数据可供粘贴！")},error:function(e){a(e)}})},t.handleError=a,t.nextIFrameId=function(){return window.iframe_id_++,"_iframe"+window.iframe_id_},t.getParameter=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?n[2]:null},t.ajaxSave=function(e,t,n){$.ajax({type:"POST",url:e,data:t,success:function(e){n(e)},error:function(e){a(e)}})},t.formatDate=function(e,t){"number"==typeof e&&(e=new Date(e));if("string"==typeof e)return e;var n={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},t.escapeXml=function(e){return e.replace(/[<>&"]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})},window.iframe_id_=1,window.__u_id_=0,window._fullpath_map=new Map},617:function(e,t,n){"use strict";var r,a=n(4),o=n(618),i=(r=o)&&r.__esModule?r:{default:r};$(document).ready(function(){var e=$("#container"),t=$('<button type="button" class="btn btn-default" style="margin: 5px"><i class="glyphicon glyphicon-plus"></i> 添加新用户</button>');e.append(t),t.click(function(){(new i.default).show()});var n=$('<table class="table table-bordered">\n        <thead><tr style="background: #f6f6f6">\n            <td>用户名</td>\n            <td style="width: 100px">操作</td>\n        </tr></thead>\n    </table>');e.append(n);var r=$("<tbody></tbody>");n.append(r),window.loadUsers=function(){$.ajax({url:window._server+"/user/loadUsers",success:function(e){r.empty();var t=function(e){var t=$("<tr></tr>");r.append(t),t.mouseover(function(){$(this).addClass("bg-warning").siblings().removeClass("bg-warning")});var n=$("<td>"+e.name+"</td>");t.append(n);var o=$("<td></td>");t.append(o);var i=$('<button type="button" class="btn btn-link" style="padding: 2px 5px;color: red" title="删除"><i class="glyphicon glyphicon-minus-sign"></i></button>');o.append(i),i.click(function(){bootbox.confirm("真的要删除用户【"+e.name+"】？",function(n){n&&$.ajax({url:window._server+"/user/deleteUser",data:{username:e.name},type:"POST",success:function(e){e.error?bootbox.alert(e.error):t.remove()},error:function(e){(0,a.handleError)(e)}})})});var l=$('<button type="button" class="btn btn-link" style="padding: 2px 2px" title="重置密码"><i class="glyphicon glyphicon-refresh"></i></button>');o.append(l),l.click(function(){bootbox.confirm("真的要重置用户【"+e.name+"】的密码吗？",function(t){if(t){var n=parseInt(1e4*Math.random());$.ajax({url:window._server+"/user/resetPassword",type:"POST",data:{username:e.name,newPassword:n},success:function(){bootbox.alert("用户【"+e.name+"】的密码已被重置为："+n)},error:function(e){(0,a.handleError)(e)}})}})})},n=!0,o=!1,i=void 0;try{for(var l,s=(e||[])[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){t(l.value)}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}}})},loadUsers()})},618:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialog=$('<div class="modal fade" role="dialog" aria-hidden="true" data-backdrop="static">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n                            &times;\n                        </button>\n                        <h4 class="modal-title">\n                            用户信息定义\n                        </h4>\n                    </div>\n                    <div class="modal-body"></div>\n                    <div class="modal-footer">\n                    </div>\n                </div>\n            </div>\n        </div>');var t=this.dialog.find(".modal-body"),n=this.dialog.find(".modal-footer");this.initBody(t,n)}return r(e,[{key:"initBody",value:function(e,t){var n=$('<div class="form-group"><label>用户名</label></div>');e.append(n);var r=$('<input type="text" class="form-control">');n.append(r);var o=$('<div class="form-group"><label>密码</label></div>');e.append(o);var i=$('<input type="text" class="form-control">');o.append(i);var l=$('<button type="button" class="btn btn-default">确定</button>');t.append(l);var s=this;l.click(function(){var e=r.val(),t=i.val();e&&t?"admin"!==e.trim().toLowerCase()?$.ajax({url:window._server+"/user/addUser",type:"POST",data:{username:e,password:t},success:function(e){e.error?bootbox.alert(e.error):(loadUsers(),s.dialog.modal("hide"))},error:function(e){(0,a.handleError)(e)}}):bootbox.alert("用户名不能使用admin！"):bootbox.alert("用户名密码不能为空！")})}},{key:"show",value:function(){this.dialog.modal("show")}}]),e}();t.default=o}});