!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=596)}({399:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(4);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=[],this.output=[],this.dialog=$('<div class="modal fade" role="dialog" aria-hidden="true">\n            <div class="modal-dialog modal-lg">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n                            &times;\n                        </button>\n                        <h4 class="modal-title">\n                            Excel模版配置\n                        </h4>\n                    </div>\n                    <div class="modal-body"></div>\n                    <div class="modal-footer">\n                    </div>\n                </div>\n            </div>\n        </div>');var a=this.dialog.find(".modal-body"),n=this.dialog.find(".modal-footer");this.initBody(a,n,t)}return n(e,[{key:"initBody",value:function(e,t,a){var n=$('<div style="position: absolute;top: 50%;left: 30%;color: #d30a16;"><h1>数据加载中，请稍后...</h1></div>');e.append(n);var o=this,i=$('<div class="container" style="width: 100%"></div>');e.append(i);var r=$('<fieldset style="border-radius: 5px"><legend>输入数据字段选择</legend></fieldset>'),l=$('<fieldset style="border-radius: 5px;margin-top: 20px"><legend>预期结果字段选择</legend></fieldset>');i.append(r),i.append(l),this.initData(function(e){setTimeout(function(){o.buildInputDataConfig(r,e,a.inputData||[]),o.buildOutputDataConfig(l,e,a.outputData||[]),n.hide()},100)});var d=window._server+"/test/generateExcel",c=$('<form method="post" action="'+d+'" target="_blank" style="display: none"></form>');e.append(c);var s=$('<input type="hidden" name="input">'),u=$('<input type="hidden" name="output">');c.append(s),c.append(u);var p=$('<button type="button" class="btn btn-default">下载Excel模版</button>');t.append(p),p.click(function(){var e=o.buildFields(o.input),t=o.buildFields(o.output);s.val(encodeURI(JSON.stringify(e))),u.val(encodeURI(JSON.stringify(t))),c.submit()});var f=$('<button type="button" class="btn btn-default">保存</button>');t.append(f),f.click(function(){var e=o.buildFields(o.input);if(e.length<1)bootbox.alert("输入的数据不能为空！");else{var t=o.buildFields(o.output);t.length<1?bootbox.alert("预期结果数据不能为空！"):(a.inputData=e,a.outputData=t,o.dialog.modal("hide"))}})}},{key:"buildFields",value:function(e){var t=[],a=!0,n=!1,o=void 0;try{for(var i,r=e[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var l=i.value;l.fields.length>0&&t.push(l)}}catch(e){n=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}return t}},{key:"buildInputDataConfig",value:function(e,t,a){var n=this,o=this,i=function(t){var i={name:t.name,fields:[]};n.input.push(i);var r=n.findData(a,t.name),l=$('<div class="row"></div>'),d=$('<div class="col-md-12"><label>'+t.name+"</label></div>");l.append(d);var c=[],s=$('<button type="button" class="btn btn-link">全选</button>');d.append(s),s.click(function(){var e=!0;"全选"===s.html()?(s.html("全不选"),e=!0):(s.html("全选"),e=!1);var t=!0,a=!1,n=void 0;try{for(var o,i=c[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var r=o.value;r.children(":checkbox").prop("checked",e),r.children(":checkbox").trigger("change")}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}});var u=$('<button type="button" class="btn btn-link">展开</button>');d.append(u),e.append(l);var p=$('<div class="row"></div>');e.append(p);var f=$('<div class="col-md-12" style="line-height: 30px"></div>');p.append(f),u.click(function(){"展开"===u.html()?(u.html("收起"),f.show()):(u.html("展开"),f.hide())}),f.hide();var h=function(e){var t=$('<label class="checkbox-inline" style="margin-left: 30px"><input type="checkbox" value="'+e.label+'">'+e.label+"</label>");f.append(t),c.push(t);var a=n.findDataField(r,e.label);a&&(t.children(":checkbox").prop("checked",!0),i.fields.push(a)),t.children(":checkbox").change(function(){var t=o.findField(i.fields,e.label);if($(this).prop("checked"))t||i.fields.push({name:e.name,label:e.label,datatype:e.type});else if(t){var a=i.fields.indexOf(t);i.fields.splice(a,1)}})},v=!0,b=!1,y=void 0;try{for(var m,g=t.variables[Symbol.iterator]();!(v=(m=g.next()).done);v=!0){h(m.value)}}catch(e){b=!0,y=e}finally{try{!v&&g.return&&g.return()}finally{if(b)throw y}}},r=!0,l=!1,d=void 0;try{for(var c,s=t[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){i(c.value)}}catch(e){l=!0,d=e}finally{try{!r&&s.return&&s.return()}finally{if(l)throw d}}}},{key:"buildOutputDataConfig",value:function(e,t,a){var n=this,o=this,i=function(t){var i={name:t.name,fields:[]};n.output.push(i);var r=n.findData(a,t.name),l=$('<div class="row"></div>'),d=$('<div class="col-md-12"><label>'+t.name+"</label></div>");l.append(d);var c=[],s=$('<button type="button" class="btn btn-link">全选</button>');d.append(s),s.click(function(){var e=!0;"全选"===s.html()?(s.html("全不选"),e=!0):(s.html("全选"),e=!1);var t=!0,a=!1,n=void 0;try{for(var o,i=c[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var r=o.value;r.children(":checkbox").prop("checked",e),r.children(":checkbox").trigger("change")}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}});var u=$('<button type="button" class="btn btn-link">展开</button>');d.append(u),e.append(l);var p=$('<div class="row"></div>');e.append(p);var f=$('<div class="col-md-12" style="margin-left: 20px"></div>');p.append(f),u.click(function(){"展开"===u.html()?(u.html("收起"),f.show()):(u.html("展开"),f.hide())}),f.hide();var h=$('<div class="col-md-6"></div>'),v=$('<div class="col-md-6"></div>');f.append(h),f.append(v);var b=0,y=function(e){var t=$('<div class="checkbox" style="margin-bottom: 15px"></div>'),a=$('<label><input type="checkbox" value="'+e.label+'"> '+e.label+"</label>");t.append(a);var l=$('<span style="margin-left: 10px"></span>');t.append(l);var d=$('<select class="form-control" style="width: inherit;display: inline-block;padding: 1px;height: 24px;"></select>');n.buildOp(d),l.append(d),b%2==0?h.append(t):v.append(t);var s=n.findDataField(r,e.label);s&&(a.children(":checkbox").prop("checked",!0),d.val(s.op),i.fields.push(s)),c.push(a),a.children(":checkbox").change(function(){var t=o.findField(i.fields,e.label);if($(this).prop("checked"))t||i.fields.push({name:e.name,label:e.label,datatype:e.type,op:d.val()});else if(t){var a=i.fields.indexOf(t);i.fields.splice(a,1)}}),d.change(function(){if(a.children(":checkbox").prop("checked")){var t=$(this).val();o.findField(i.fields,e.label).op=t}}),b++},m=!0,g=!1,w=void 0;try{for(var x,k=t.variables[Symbol.iterator]();!(m=(x=k.next()).done);m=!0){y(x.value)}}catch(e){g=!0,w=e}finally{try{!m&&k.return&&k.return()}finally{if(g)throw w}}},r=!0,l=!1,d=void 0;try{for(var c,s=t[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){i(c.value)}}catch(e){l=!0,d=e}finally{try{!r&&s.return&&s.return()}finally{if(l)throw d}}}},{key:"findField",value:function(e,t){var a=!0,n=!1,o=void 0;try{for(var i,r=e[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var l=i.value;if(l.label===t)return l}}catch(e){n=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}return null}},{key:"findDataField",value:function(e,t){if(!e)return null;var a=!0,n=!1,o=void 0;try{for(var i,r=e.fields[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var l=i.value;if(l.label===t)return l}}catch(e){n=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}return null}},{key:"findData",value:function(e,t){var a=!0,n=!1,o=void 0;try{for(var i,r=e[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var l=i.value;if(l.name===t)return l}}catch(e){n=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}return null}},{key:"buildOp",value:function(e){e.append('<option value="GreaterThen">大于</option>'),e.append('<option value="GreaterThenEquals">大于或等于</option>'),e.append('<option value="LessThen">小于</option>'),e.append('<option value="LessThenEquals">小于或等于</option>'),e.append('<option value="Equals" selected>等于</option>'),e.append('<option value="EqualsIgnoreCase">等于(不分大小写)</option>'),e.append('<option value="StartWith">开始于</option>'),e.append('<option value="NotStartWith">不开始于</option>'),e.append('<option value="EndWith">结束于</option>'),e.append('<option value="NotEndWith">不结束于</option>'),e.append('<option value="NotEquals">不等于</option>'),e.append('<option value="NotEqualsIgnoreCase">不等于(不分大小写)</option>'),e.append('<option value="In">在集合中</option>'),e.append('<option value="NotIn">不在集合中</option>'),e.append('<option value="Null">为空</option>'),e.append('<option value="NotNull">不为空</option>'),e.append('<option value="Match">匹配正则表达式</option>'),e.append('<option value="NotMatch">不匹配正则表达式</option>'),e.append('<option value="Contain">包含</option>'),e.append('<option value="NotContain">不包含</option>')}},{key:"initData",value:function(e){var t=(0,o.getParameter)("files");$.ajax({type:"POST",data:{files:t},url:window._server+"/test/loadLibs",success:function(t){e(t)},error:function(e){(0,o.handleError)(e)}})}},{key:"show",value:function(){this.dialog.modal("show")}}]),e}();t.default=i},4:function(e,t,a){"use strict";function n(){return window.__u_id_++,"_u_r_id__"+window.__u_id_}function o(e){if(e&&401===e.status)bootbox.alert("权限不足，不能进行此操作.");else if(e&&e.responseText){var t=e.responseText,a=JSON.parse(t);bootbox.dialog({title:"服务端错误",message:"<span style='color: red'>"+a.errorMsg+"</span>",buttons:[{label:"查看错误堆栈",callback:function(){var e=window.open("error-stack.html","_blank");$(e).load(function(){var e=$(this.document.body);e.css({"font-size":"13px"}),e.empty(),e.append(a.stack)})}}]})}else bootbox.alert("<span style='color: red'>服务端出错</span>")}Object.defineProperty(t,"__esModule",{value:!0}),t.generateId=n,t.pathId=function(e){if(_fullpath_map.has(e))return _fullpath_map.get(e);var t=n();return _fullpath_map.set(e,t),t},t.copyCellData=function(e,t){$.ajax({url:window._server+"/common/parseCellData",type:"POST",data:{type:e,xml:t}})},t.pasteCellData=function(e,t){$.ajax({url:window._server+"/common/loadCellData",type:"POST",data:{type:e},success:function(e){e?t(e):bootbox.alert("当前没有数据可供粘贴！")},error:function(e){o(e)}})},t.handleError=o,t.nextIFrameId=function(){return window.iframe_id_++,"_iframe"+window.iframe_id_},t.getParameter=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?a[2]:null},t.ajaxSave=function(e,t,a){$.ajax({type:"POST",url:e,data:t,success:function(e){a(e)},error:function(e){o(e)}})},t.formatDate=function(e,t){"number"==typeof e&&(e=new Date(e));if("string"==typeof e)return e;var a={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t},t.escapeXml=function(e){return e.replace(/[<>&"]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})},window.iframe_id_=1,window.__u_id_=0,window._fullpath_map=new Map},50:function(e,t,a){"use strict";function n(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}function o(e,t,a,o,i,r){return n((l=n(n(t,e),n(o,r)))<<(d=i)|l>>>32-d,a);var l,d}function i(e,t,a,n,i,r,l){return o(t&a|~t&n,e,t,i,r,l)}function r(e,t,a,n,i,r,l){return o(t&n|a&~n,e,t,i,r,l)}function l(e,t,a,n,i,r,l){return o(t^a^n,e,t,i,r,l)}function d(e,t,a,n,i,r,l){return o(a^(t|~n),e,t,i,r,l)}function c(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var a,o,c,s,u,p=1732584193,f=-271733879,h=-1732584194,v=271733878;for(a=0;a<e.length;a+=16)o=p,c=f,s=h,u=v,p=i(p,f,h,v,e[a],7,-680876936),v=i(v,p,f,h,e[a+1],12,-389564586),h=i(h,v,p,f,e[a+2],17,606105819),f=i(f,h,v,p,e[a+3],22,-1044525330),p=i(p,f,h,v,e[a+4],7,-176418897),v=i(v,p,f,h,e[a+5],12,1200080426),h=i(h,v,p,f,e[a+6],17,-1473231341),f=i(f,h,v,p,e[a+7],22,-45705983),p=i(p,f,h,v,e[a+8],7,1770035416),v=i(v,p,f,h,e[a+9],12,-1958414417),h=i(h,v,p,f,e[a+10],17,-42063),f=i(f,h,v,p,e[a+11],22,-1990404162),p=i(p,f,h,v,e[a+12],7,1804603682),v=i(v,p,f,h,e[a+13],12,-40341101),h=i(h,v,p,f,e[a+14],17,-1502002290),p=r(p,f=i(f,h,v,p,e[a+15],22,1236535329),h,v,e[a+1],5,-165796510),v=r(v,p,f,h,e[a+6],9,-1069501632),h=r(h,v,p,f,e[a+11],14,643717713),f=r(f,h,v,p,e[a],20,-373897302),p=r(p,f,h,v,e[a+5],5,-701558691),v=r(v,p,f,h,e[a+10],9,38016083),h=r(h,v,p,f,e[a+15],14,-660478335),f=r(f,h,v,p,e[a+4],20,-405537848),p=r(p,f,h,v,e[a+9],5,568446438),v=r(v,p,f,h,e[a+14],9,-1019803690),h=r(h,v,p,f,e[a+3],14,-187363961),f=r(f,h,v,p,e[a+8],20,1163531501),p=r(p,f,h,v,e[a+13],5,-1444681467),v=r(v,p,f,h,e[a+2],9,-51403784),h=r(h,v,p,f,e[a+7],14,1735328473),p=l(p,f=r(f,h,v,p,e[a+12],20,-1926607734),h,v,e[a+5],4,-378558),v=l(v,p,f,h,e[a+8],11,-2022574463),h=l(h,v,p,f,e[a+11],16,1839030562),f=l(f,h,v,p,e[a+14],23,-35309556),p=l(p,f,h,v,e[a+1],4,-1530992060),v=l(v,p,f,h,e[a+4],11,1272893353),h=l(h,v,p,f,e[a+7],16,-155497632),f=l(f,h,v,p,e[a+10],23,-1094730640),p=l(p,f,h,v,e[a+13],4,681279174),v=l(v,p,f,h,e[a],11,-358537222),h=l(h,v,p,f,e[a+3],16,-722521979),f=l(f,h,v,p,e[a+6],23,76029189),p=l(p,f,h,v,e[a+9],4,-640364487),v=l(v,p,f,h,e[a+12],11,-421815835),h=l(h,v,p,f,e[a+15],16,530742520),p=d(p,f=l(f,h,v,p,e[a+2],23,-995338651),h,v,e[a],6,-198630844),v=d(v,p,f,h,e[a+7],10,1126891415),h=d(h,v,p,f,e[a+14],15,-1416354905),f=d(f,h,v,p,e[a+5],21,-57434055),p=d(p,f,h,v,e[a+12],6,1700485571),v=d(v,p,f,h,e[a+3],10,-1894986606),h=d(h,v,p,f,e[a+10],15,-1051523),f=d(f,h,v,p,e[a+1],21,-2054922799),p=d(p,f,h,v,e[a+8],6,1873313359),v=d(v,p,f,h,e[a+15],10,-30611744),h=d(h,v,p,f,e[a+6],15,-1560198380),f=d(f,h,v,p,e[a+13],21,1309151649),p=d(p,f,h,v,e[a+4],6,-145523070),v=d(v,p,f,h,e[a+11],10,-1120210379),h=d(h,v,p,f,e[a+2],15,718787259),f=d(f,h,v,p,e[a+9],21,-343485551),p=n(p,o),f=n(f,c),h=n(h,s),v=n(v,u);return[p,f,h,v]}function s(e){var t,a="";for(t=0;t<32*e.length;t+=8)a+=String.fromCharCode(e[t>>5]>>>t%32&255);return a}function u(e){var t,a=[];for(a[(e.length>>2)-1]=void 0,t=0;t<a.length;t+=1)a[t]=0;for(t=0;t<8*e.length;t+=8)a[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return a}function p(e){var t,a,n="0123456789abcdef",o="";for(a=0;a<e.length;a+=1)t=e.charCodeAt(a),o+=n.charAt(t>>>4&15)+n.charAt(15&t);return o}function f(e){return unescape(encodeURIComponent(e))}function h(e){return function(e){return s(c(u(e),8*e.length))}(f(e))}function v(e,t){return function(e,t){var a,n,o=u(e),i=[],r=[];for(i[15]=r[15]=void 0,o.length>16&&(o=c(o,8*e.length)),a=0;a<16;a+=1)i[a]=909522486^o[a],r[a]=1549556828^o[a];return n=c(i.concat(u(t)),512+8*t.length),s(c(r.concat(n),640))}(f(e),f(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.encrypt=function(e){return function(e){function t(e,t){return e<<t|e>>>32-t}function a(e){var t="",a=void 0;for(a=7;a>=0;a--)t+=(e>>>4*a&15).toString(16);return t}var n=void 0,o=void 0,i=void 0,r=new Array(80),l=1732584193,d=4023233417,c=2562383102,s=271733878,u=3285377520,f=void 0,b=void 0,y=void 0,m=void 0,g=void 0,w=void 0,x=(e=function(e){-1===(e=(e=function(e,t,a){if(e+="-",e+="+",e+="*",e+="!",e+="@",e+="$",e+="#",!t)return a?h(e):p(h(e));if(!a)return p(v(t,e));return v(t,e)}("urule-pro-"+e)).replace(/\r\n/g,"\n")).indexOf("S")?e+=(new Date).getDate():e+=(new Date).getMonth();for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e)).length,k=new Array;for(o=0;o<x-3;o+=4)i=e.charCodeAt(o)<<24|e.charCodeAt(o+1)<<16|e.charCodeAt(o+2)<<8|e.charCodeAt(o+3),k.push(i);switch(x%4){case 0:o=2147483648;break;case 1:o=e.charCodeAt(x-1)<<24|8388608;break;case 2:o=e.charCodeAt(x-2)<<24|e.charCodeAt(x-1)<<16|32768;break;case 3:o=e.charCodeAt(x-3)<<24|e.charCodeAt(x-2)<<16|e.charCodeAt(x-1)<<8|128}k.push(o);for(;k.length%16!=14;)k.push(0);for(k.push(x>>>29),k.push(x<<3&4294967295),n=0;n<k.length;n+=16){for(o=0;o<16;o++)r[o]=k[n+o];for(o=16;o<=79;o++)r[o]=t(r[o-3]^r[o-8]^r[o-14]^r[o-16],1);for(f=l,b=d,y=c,m=s,g=u,o=0;o<=19;o++)w=t(f,5)+(b&y|~b&m)+g+r[o]+1518500249&4294967295,g=m,m=y,y=t(b,30),b=f,f=w;for(o=20;o<=39;o++)w=t(f,5)+(b^y^m)+g+r[o]+1859775393&4294967295,g=m,m=y,y=t(b,30),b=f,f=w;for(o=40;o<=59;o++)w=t(f,5)+(b&y|b&m|y&m)+g+r[o]+2400959708&4294967295,g=m,m=y,y=t(b,30),b=f,f=w;for(o=60;o<=79;o++)w=t(f,5)+(b^y^m)+g+r[o]+3395469782&4294967295,g=m,m=y,y=t(b,30),b=f,f=w;l=l+f&4294967295,d=d+b&4294967295,c=c+y&4294967295,s=s+m&4294967295,u=u+g&4294967295}return(a(l)+a(d)+a(c)+a(s)+a(u)).toLowerCase()}(e)}},596:function(e,t,a){"use strict";var n,o=a(597),i=(n=o)&&n.__esModule?n:{default:n},r=a(4);$(document).ready(function(){var e=$("#nav");e.append('<span style="color:#999">当前位置：</span>');var t=window._server+"/packageeditor?file="+encodeURI((0,r.getParameter)("project"));e.append('<a href="'+t+'" target="_self">知识包管理</a>'),e.append('<span>/知识包[<strong style="color: #f16aad;">'+decodeURI((0,r.getParameter)("packageName"))+"</strong>]的仿真测试</span>");var a=$("#container");new i.default(a)})},597:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(4),i=d(a(598)),r=d(a(599)),l=a(50);function d(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.list=[],this.init(t);var a=new Date,n=new Date(window._date_);if(a.getDate()<n.getDate()){var o=window._core_version;o?(o=(0,l.encrypt)(o))!==window._lis_&&bootbox.alert(unescape("%u60A8%u5F53%u524D%u6B63%u5728%u4F7F%u7528%u7684%u662F%u4EA7%u54C1%u8BD5%u7528%u7248")):bootbox.alert(unescape("%u60A8%u5F53%u524D%u6B63%u5728%u4F7F%u7528%u7684%u662F%u4EA7%u54C1%u8BD5%u7528%u7248"))}}return n(e,[{key:"init",value:function(e){var t=$('<div style="height: 40px;"></div>');e.append(t);var a=$('<button class="btn btn-danger"><i class="glyphicon glyphicon-plus-sign"> 添加新的测试方案</button>');t.append(a);var n=this;a.click(function(){new i.default({add:!0},function(e){n.list.push(e),n.save(),n.newRow(e)}).show()});var o=$('<table class="table table-bordered">\n            <thead><tr style="background: #f2f1f1">\n                <td style="width: 180px">方案名称</td>\n                <td>描述</td>\n                <td style="width:160px">创建时间</td>\n                <td style="width: 110px">创建人</td>\n                <td style="width: 90px;">操作</td>\n            </tr></thead>\n        </table>');e.append(o),this.tbody=$("<tbody></tbody>"),o.append(this.tbody),this.initData()}},{key:"initData",value:function(){var e=this,t=(0,o.getParameter)("project"),a=(0,o.getParameter)("packageId");$.ajax({type:"POST",data:{project:t,packageId:a},url:window._server+"/test/loadTestScenarios",success:function(t){var a=!0,n=!1,o=void 0;try{for(var i,r=t[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var l=i.value;e.list.push(l),e.newRow(l)}}catch(e){n=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}},error:function(e){(0,o.handleError)(e)}})}},{key:"newRow",value:function(e){var t=this,a=$("<tr></tr>");this.tbody.append(a);var n=$("<td>"+e.name+"</td>");a.append(n);var l=$("<td>"+e.desc+"</td>");a.append(l);var d=$("<td>"+e.createDate+"</td>");a.append(d);var c=$("<td>"+e.createUser+"</td>");a.append(c);var s=$("<td></td>");a.append(s);var u=$('<a href="###"><i class="glyphicon glyphicon-edit" style="color: #0055aa" title="编辑"></i></a>');u.click(function(){new i.default(e,function(e){n.html(e.name),l.html(e.desc),c.html(e.createUser),d.html(e.createDate),t.save()}).show(),$(document.body).css("padding","0")}),s.append(u);var p=$('<a href="###"><i class="glyphicon glyphicon-trash" style="color: #ef5100;margin-left: 10px" title="删除"></i></a>');p.click(function(){bootbox.confirm("真的要删除当前测试方案？",function(n){if(n){var o=t.list.indexOf(e);t.list.splice(o,1),a.remove(),t.save(),$(document.body).css("padding","0")}})}),s.append(p);var f=$('<a href="###"><i class="glyphicon glyphicon-flash" style="color: #ef5100;margin-left: 10px" title="运行此测试方案"></i></a>');s.append(f),f.click(function(){new r.default(e,(0,o.getParameter)("files"),(0,o.getParameter)("project")).show(),$(document.body).css("padding","0")})}},{key:"save",value:function(){var e='<?xml version="1.0" encoding="utf-8"?>';e+="<scenarios>";var t=!0,a=!1,n=void 0;try{for(var i,r=this.list[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var l=i.value;e+='<scenario name="'+l.name+'" desc="'+l.desc+'" excel-id="'+l.excelId+'" create-user="'+l.createUser+'" create-date="'+l.createDate+'"',e+=' show-input-data="'+(l.showInputData?"true":"false")+'"',e+=' show-output-data="'+(l.showOutputData?"true":"false")+'"',e+=' show-log="'+(l.showLog?"true":"false")+'"',e+=' show-fired-flow-node-list="'+(l.showFiredFlowNodeList?"true":"false")+'"',e+=' show-fired-flow-node-size="'+(l.showFiredFlowNodeSize?"true":"false")+'"',e+=' show-matched-rule-list="'+(l.showMatchedRuleList?"true":"false")+'"',e+=' show-matched-rule-size="'+(l.showMatchedRuleSize?"true":"false")+'"',e+=' show-not-match-rule-size="'+(l.showNotMatchRuleSize?"true":"false")+'"',e+=' show-not-match-rule-list="'+(l.showNotMatchRuleList?"true":"false")+'"',e+=">";var d=!0,c=!1,s=void 0;try{for(var u,p=(l.inputData||[])[Symbol.iterator]();!(d=(u=p.next()).done);d=!0){var f=u.value;e+='<input name="'+f.name+'">';var h=!0,v=!1,b=void 0;try{for(var y,m=f.fields[Symbol.iterator]();!(h=(y=m.next()).done);h=!0){var g=y.value;e+='<field name="'+g.name+'" label="'+g.label+'" datatype="'+g.datatype+'"/>'}}catch(e){v=!0,b=e}finally{try{!h&&m.return&&m.return()}finally{if(v)throw b}}e+="</input>"}}catch(e){c=!0,s=e}finally{try{!d&&p.return&&p.return()}finally{if(c)throw s}}var w=!0,x=!1,k=void 0;try{for(var _,S=(l.outputData||[])[Symbol.iterator]();!(w=(_=S.next()).done);w=!0){var D=_.value;e+='<output name="'+D.name+'">';var C=!0,O=!1,F=void 0;try{for(var E,M=D.fields[Symbol.iterator]();!(C=(E=M.next()).done);C=!0){var j=E.value;e+='<field name="'+j.name+'" label="'+j.label+'" datatype="'+j.datatype+'" op="'+j.op+'"/>'}}catch(e){O=!0,F=e}finally{try{!C&&M.return&&M.return()}finally{if(O)throw F}}e+="</output>"}}catch(e){x=!0,k=e}finally{try{!w&&S.return&&S.return()}finally{if(x)throw k}}e+="</scenario>"}}catch(e){a=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw n}}e+="</scenarios>",e=encodeURIComponent(e);var I=window._server+"/test/saveTestScenarios";$.ajax({type:"POST",url:I,data:{project:(0,o.getParameter)("project"),packageId:(0,o.getParameter)("packageId"),content:e},success:function(){bootbox.alert("操作成功！")},error:function(e){(0,o.handleError)(e)}})}}]),e}();t.default=c},598:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(399),r=(n=i)&&n.__esModule?n:{default:n},l=a(4);var d=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialog=$('<div class="modal fade" role="dialog" aria-hidden="true">\n            <div class="modal-dialog modal-lg">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n                            &times;\n                        </button>\n                        <h4 class="modal-title">\n                            测试方案配置\n                        </h4>\n                    </div>\n                    <div class="modal-body"></div>\n                    <div class="modal-footer">\n                    </div>\n                </div>\n            </div>\n        </div>');var n=this.dialog.find(".modal-body"),o=this.dialog.find(".modal-footer");this.initBody(n,o,t,a)}return o(e,[{key:"initBody",value:function(e,t,a,n){var o=$('<div class="container" style="width: 100%;"></div>');e.append(o);var i=$('<div class="row"></div>'),d=$('<div class="col-md-6"><label>方案名称</label></div>'),c=$('<input type="text" class="form-control">');d.append(c),i.append(d),o.append(i),c.change(function(){a.name=$(this).val()}),a.name&&c.val(a.name);var s=$('<div class="col-md-6"><label>描述</label></div>'),u=$('<input type="text" class="form-control">');s.append(u),i.append(s),u.change(function(){a.desc=$(this).val()}),a.desc&&u.val(a.desc);var p=this,f=$('<div class="row" style="padding-top:30px;"></div>'),h=$("<div><label>Excel格式测试方案文件模版</label></div>");a.excelId?h.addClass("col-md-4"):h.addClass("col-md-6");var v=$('<button class="btn btn-link" style="display: block">Excel模版配置与下载</button>');if(h.append(v),v.click(function(){new r.default(a).show()}),f.append(h),a.excelId){var b=$('<div class="col-md-4"><label>已上传的Excel测试方案文件</label></div>'),y=$('<button class="btn btn-link" style="display: block">下载此Excel文件</button>');y.click(function(){var e=window._server+"/test/downloadExcel?project="+(0,l.getParameter)("project")+"&excelId="+a.excelId;window.open(e,"_blank")}),b.append(y),f.append(b)}var m=$("<div></div>");a.excelId?(m.addClass("col-md-4"),m.append("<label>上传新的Excel测试方案文件</label>")):(m.addClass("col-md-6"),m.append("<label>上传Excel测试方案文件</label>"));var g=window._server+"/test/uploadScenarioExcel?project="+(0,l.getParameter)("project");a.excelId&&(g+="&excelId="+a.excelId);var w=$('<form method="post" enctype="multipart/form-data" action="'+g+'" target="uploadIFrame"></form>');m.append(w);var x=$('<input type="file" style="display: block" name="file" class="form-control">');w.append(x);var k=$('<iframe name="uploadIFrame" style="width: 0px;height: 0px;" frameborder="0"></iframe>');m.append(k),f.append(m),k.load(function(){var e=k.contents().text();if(e){var t=JSON.parse(e);t.error?bootbox.alert("上传Excel测试方案文件失败："+t.exception):(a.excelId=t.excelId,a.createUser=t.createUser,a.createDate=t.createDate,n(a),p.dialog.modal("hide"))}}),o.append(f);var _=$('<div class="row" style="padding-top:30px;"></div>'),S=$('<div class="col-md-12"><label>测试报告输出内容</label></div>');_.append(S),o.append(_);var D=$('<div class="checkbox"><label><input type="checkbox">显示输入数据</label></div>');S.append(D),D.find(":checkbox").click(function(){$(this).prop("checked"),a.showInputData=!0}),a.showInputData&&D.find(":checkbox").prop("checked",!0);var C=$('<div class="checkbox"><label><input type="checkbox">显示输出数据</label></div>');S.append(C),C.find(":checkbox").click(function(){$(this).prop("checked")?a.showOutputData=!0:a.showOutputData=!1}),a.showOutputData&&C.find(":checkbox").prop("checked",!0);var O=$('<div class="checkbox"><label><input type="checkbox">调试信息日志(规则中允许调试信息输出时有效)</label></div>');S.append(O),O.find(":checkbox").click(function(){$(this).prop("checked")?a.showLog=!0:a.showLog=!1}),a.showLog&&O.find(":checkbox").prop("checked",!0);var F=$('<div class="checkbox"><label><input type="checkbox">匹配的规则列表(规则中允许调试信息输出时有效)</label></div>');S.append(F),F.find(":checkbox").click(function(){$(this).prop("checked")?a.showMatchedRuleList=!0:a.showMatchedRuleList=!1}),a.showMatchedRuleList&&F.find(":checkbox").prop("checked",!0);var E=$('<div class="checkbox"><label><input type="checkbox">匹配的规则数量(规则中允许调试信息输出时有效)</label></div>');S.append(E),E.find(":checkbox").click(function(){$(this).prop("checked")?a.showMatchedRuleSize=!0:a.showMatchedRuleSize=!1}),a.showMatchedRuleSize&&E.find(":checkbox").prop("checked",!0);var M=$('<div class="checkbox"><label><input type="checkbox">不匹配的规则列表(规则中允许调试信息输出时有效)</label></div>');S.append(M),M.find(":checkbox").click(function(){$(this).prop("checked")?a.showNotMatchRuleList=!0:a.showNotMatchRuleList=!1}),a.showNotMatchRuleList&&M.find(":checkbox").prop("checked",!0);var j=$('<div class="checkbox"><label><input type="checkbox">不匹配的规则数量(规则中允许调试信息输出时有效)</label></div>');S.append(j),j.find(":checkbox").click(function(){$(this).prop("checked")?a.showNotMatchRuleSize=!0:a.showNotMatchRuleSize=!1}),a.showNotMatchRuleSize&&j.find(":checkbox").prop("checked",!0);var I=$('<div class="checkbox"><label><input type="checkbox">触发的规则流节点列表(如果当前知识包中有规则流且允许调试信息输出时有效)</label></div>');S.append(I),I.find(":checkbox").click(function(){$(this).prop("checked")?a.showFiredFlowNodeList=!0:a.showFiredFlowNodeList=!1}),a.showFiredFlowNodeList&&I.find(":checkbox").prop("checked",!0);var P=$('<div class="checkbox"><label><input type="checkbox">触发的规则流节点数量(如果当前知识包中有规则流允许调试信息输出时有效)</label></div>');S.append(P),P.find(":checkbox").click(function(){$(this).prop("checked")?a.showFiredFlowNodeSize=!0:a.showFiredFlowNodeSize=!1}),a.showFiredFlowNodeSize&&P.find(":checkbox").prop("checked",!0);var N=$('<button type="button" class="btn btn-default">确定</button>');t.append(N),N.click(function(){if(a.name)if(a.desc)if(!a.inputData||a.inputData.length<1)bootbox.alert("输入的数据不能为空，请先配置模版！");else if(!a.outputData||a.outputData.length<1)bootbox.alert("预期结果数据不能为空，请先配置模版！");else if(a.excelId)x.val()?w.get(0).submit():(w.remove(),n(a),p.dialog.modal("hide"));else{if(!x.val())return void bootbox.alert("请选择要上传的Excel测试方案文件");w.get(0).submit()}else bootbox.alert("方案描述不能为空！");else bootbox.alert("方案名称不能为空！")}),this.dialog.on("hidden.bs.modal",function(){k.remove()})}},{key:"show",value:function(){this.dialog.modal("show")}}]),e}();t.default=d},599:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(399),r=((n=i)&&n.__esModule,a(4));var l=function(){function e(t,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialog=$('<div class="modal fade" role="dialog" aria-hidden="true">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n                            &times;\n                        </button>\n                        <h4 class="modal-title">\n                            运行方案【'+t.name+'】\n                        </h4>\n                    </div>\n                    <div class="modal-body"></div>\n                    <div class="modal-footer">\n                    </div>\n                </div>\n            </div>\n        </div>');var o=this.dialog.find(".modal-body"),i=this.dialog.find(".modal-footer");this.initBody(o,i,t,a)}return o(e,[{key:"initBody",value:function(e,t,a,n,o){var i=$("<div><span>方案运行时间与当前方案中采用的Excel中场景的数据量有关，数据量越大，运行时所耗费的时间越长.</span></div>");e.append(i);var l=$('<button type="button" class="btn btn-link" style="font-size: 30px"><i class="glyphicon glyphicon-play-circle"></i> 运行</button>'),d=$('<div style="text-align: center;"></div>');e.append(d),d.append(l);var c=window._server+"/res/urule-asserts/images/loading.gif",s=$('<div style="font-size: 20px;margin: 20px"><img src="'+c+'"><label>服务端测试运行中，请不要关闭此窗口...</label></div>');d.append(s),s.hide();var u=this;l.click(function(){bootbox.confirm("真的要运行此测试方案吗？",function(e){if(e){s.show(),l.hide();var t=window._server+"/test/doTest";$.ajax({type:"POST",data:{item:JSON.stringify(a),files:n,project:(0,r.getParameter)("project"),packageName:(0,r.getParameter)("packageName")},url:t,success:function(){s.empty();var e=$('<button type="button" class="btn btn-link">运行完成，点击查看报告</button>');e.click(function(){u.dialog.modal("hide");var e=window._server+"/testresult";window.open(e,"_blank")}),s.append(e)},error:function(e){u.dialog.modal("hide"),(0,r.handleError)(e)}})}}),$("body").removeAttr("style"),$("body").css("margin","5px")})}},{key:"show",value:function(){this.dialog.modal("show")}}]),e}();t.default=l}});